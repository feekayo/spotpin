/**
 * this route handles all requests for categories
 */
var http = require('http');
var express = require('express');
var router = express.Router();
//var router = require('router');
var app = express();
var url = require('url');
var states = require('modules/states');



router.get('/states/:id', function(request, response){
	response.send(JSON.stringify(states.query(request.params.id)))
});

router.get('/', function(request, response) {
	var get_params = url.parse(request.url, true).query;
	if(Object.keys(get_params).length == 2){
		var arg = get_params.arg;
		var value = get_params.value;
		if(arg!=''&&value!=''&&arg!=null&&value!=null){
			response.send(JSON.stringify(states.query_by_arg(arg, value)));
		}else{
			response.send('Hmmmm... something\'s not right, Are you sure you specified the URI in the right format?')
		}
		
	}else if(Object.keys(get_params).length == 0){
		//response.send('All Results');
		response.send(JSON.stringify(states.list()));
	}else{
		response.send('Hmmmm... something\'s not right, Are you sure you specified the URI in the right format?')
	}
	
	
	
});

module.exports = router;